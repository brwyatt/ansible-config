---
- name: Apply common configurations to all hosts
  hosts: all
  become: true
  roles:
    - role: common
- name: Load Balancer hosts
  hosts: loadbalancers
  become: true
  roles:
    - role: aws_creds
    - role: certbot
    - role: haproxy
    - role: keepalived
- name: Jellyfin Server
  hosts: jellyfin
  become: true
  roles:
    - role: cephclient
- name: Renderer
  hosts: renderers
  become: true
  roles:
    - role: cephclient
    - role: renderer
- name: SeedBox
  hosts: seedbox
  become: true
  roles:
    - role: cephclient
- name: NUT Server
  hosts: nutserver
  become: true
  roles:
    - role: nutserver
- name: HomeBox Server
  hosts: homebox
  become: true
  roles:
    - role: aws_creds
    - role: certbot
    - role: homebox
    - role: reverseproxy
- name: Password Servers
  hosts: sspasswdservers
  become: true
  roles:
    - role: aws_creds
    - role: certbot
    - role: sspasswd
    - role: keepalived
- name: Inbound Proxies
  hosts: inboundproxies
  roles:
    - role: aws_creds
    - role: certbot
    - role: reverseproxy
    - role: keepalived
- name: Proxmox Servers
  hosts: proxmox
  roles:
    - role: proxmox
- name: Proxmox Datacenter Manager
  hosts: proxmoxdcm
  roles:
    - role: proxmoxdcm
- name: PXE Servers
  hosts: pxeservers
  roles:
    - role: cephclient
    - role: pxeserver
    - role: keepalived
- name: Desktops
  hosts: desktops
  roles:
    - role: desktop
- name: NTP Servers
  hosts: ntpservers
  roles:
    - role: keepalived
- name: OpenMediaVault
  hosts: openmediavault
  roles:
    - role: openmediavault
- name: IPA Servers
  hosts: ipaservers
  roles:
    - role: freeipa.ansible_freeipa.ipareplica
      tags: ipa_replica_setup
